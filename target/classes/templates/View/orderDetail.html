<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: dynamic(~{::body})}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thông tin đơn hàng</title>

</head>
<body>
<style>

    .od-container {
        color: black;
        max-width: 1200px;
        margin: 0 auto;
        background-color: #fff;
        /*margin-top: 80px;*/
        padding: 20px;
    }

    .od-header {
        border-bottom: 1px solid #e0e0e0;
        padding-bottom: 15px;
        margin-bottom: 20px;
    }

    .od-title-wrapper {
        display: flex;
        align-items: center;
        gap: 15px;

    }

    .od-title {
        font-size: 24px;
        font-weight: bold;
        margin: 0; /* Bỏ margin-bottom của h1 */
        color: #000;
    }

    .back-button {
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: none;
        margin: 0; /* Đảm bảo không có margin */
    }

    .od-delivery-date {
        font-size: 16px;
        margin-bottom: 10px;
    }

    .od-status {
        display: inline-block;
        padding: 5px 10px;
        background-color: #f5f5f5;
        border-radius: 4px;
        font-weight: bold;
        color: black;
    }

    .od-row {
        display: flex;
        flex-wrap: wrap;
        margin-bottom: 30px;
    }

    .od-col {
        flex: 1;
        min-width: 300px;
        padding: 0 15px;
    }

    .od-section {
        margin-bottom: 20px;
    }

    .od-section-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 15px;
        color: #000;
        border-bottom: 1px solid #eee;
        padding-bottom: 5px;
    }

    .od-address {
        line-height: 1.6;
    }

    .od-recipient {
        font-weight: bold;
        color: #000;
    }

    .od-phone {
        color: #777;
    }

    .od-products {
        width: 100%;
        border-collapse: collapse;
    }

    .od-products th {
        text-align: left;
        padding: 10px;
        border-bottom: 1px solid #eee;
        color: #777;
        font-weight: normal;
    }

    .od-products td {
        padding: 15px 10px;
        border-bottom: 1px solid #eee;
        vertical-align: top;
    }

    .od-product-img {
        width: 80px;
        height: 80px;
        object-fit: cover;
        border-radius: 4px;
    }

    .od-product-name {
        font-weight: bold;
        margin-bottom: 5px;
    }

    .od-product-attr {
        color: #777;
        font-size: 14px;
    }

    .od-original-price {
        text-decoration: line-through;
        color: #777;
        font-size: 14px;
    }

    .od-discounted-price {
        color: #000;
        font-weight: bold;
    }

    .od-total {
        text-align: right;
        margin-top: 20px;
    }

    .od-summary-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        padding: 10px 0;
        border-bottom: 1px dashed #eee;
    }

    .od-summary-total {
        font-size: 18px;
        font-weight: bold;
        color: #000;
    }

    .od-expand-btn {
        background: none;
        border: none;
        color: #777;
        cursor: pointer;
        text-decoration: underline;
        font-size: 14px;
        padding: 0;
        margin-bottom: 10px;
        display: inline-block;
    }

    .od-expand-btn:hover {
        color: #333;
    }

    .od-detail {
        margin-bottom: 10px;
    }

    .od-detail-label {
        color: #777;
        margin-bottom: 5px;
    }

    .od-detail-value {
        font-weight: bold;
    }

    .od-copy-btn {
        background: none;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 2px 8px;
        cursor: pointer;
        margin-left: 10px;
        font-size: 12px;
    }

    .od-actions {
        display: flex;
        gap: 15px;
        margin-top: 30px;
    }

    .od-btn {
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
    }

    .od-btn-cancel {
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        color: #333;
    }

    .od-btn-track {
        background-color: #000;
        border: 1px solid #000;
        color: #fff;
    }

    .od-details-expanded {
        display: none;
        animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .back-button {
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        width: 40px;
        height: 40px;
        border-radius: 3px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: none;
    }

    .back-button i {
        color: #191b1f;
        font-size: 24px;
        transform: scaleX(-1); /* Lật ngang icon */
    }

    .back-button:hover {
        background-color: #f0f0f0; /* Màu hover nhẹ nhàng */
        transform: translateY(-2px) scale(1.05); /* Thêm hiệu ứng phóng to nhẹ */
    }

    .back-button:active {
        background-color: #e1f2ff;
        transform: translateY(0) scale(0.98); /* Hiệu ứng nhấn xuống */
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); /* Hiệu ứng bóng bên trong */
    }

</style>

<style>
    .order-status {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        width: 100%;
        padding: 0 100px;
        margin-top: 80px;
    }

    .progress-container {
        width: 100%;
        position: relative;
    }

    .progress-bar {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        position: relative;
        margin-bottom: 70px; /* Tăng margin-bottom để chứa label */
        width: 100%;
    }

    .progress-step {
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 2;
        flex: 1;
        position: relative;
        min-width: 150px;
        min-height: 100px;
    }

    .step-circle {
        width: 55px;
        height: 55px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;
        position: relative;
    }

    .step-circle.pending {
        border: 2px solid #ccc;
        background-color: white;
        color: #ccc;
    }

    .step-circle.active {
        border: 2px solid #28a745;
        background-color: #28a745;
        color: white;
    }

    .step-circle.completed {
        border: 2px solid #28a745;
        background-color: white;
        color: #28a745;
    }

    .step-label {
        text-align: center;
        font-size: 14px;
        position: absolute;
        top: 57px;
        width: 120px;
        left: 50%;
        transform: translateX(-50%);
        color: black;
        font-weight: bold;
        white-space: nowrap; /* Ngăn chữ xuống dòng */
    }

    .step-time {
        font-size: 12px;
        color: #666;
        text-align: center;
        width: 100%;
        margin-top: 5px;
        position: absolute;
        top: 70px; /* Điều chỉnh vị trí thời gian */
        left: 0;
        right: 0;
        white-space: nowrap;
    }

    .progress-line {
        position: absolute;
        height: 2px;
        background-color: #e0e0e0;
        top: 27px;
        left: 0;
        right: 0;
        z-index: 1;
    }

    .progress-line-active {
        position: absolute;
        height: 2px;
        background-color: #28a745;
        top: 27px;
        left: 0;
        z-index: 1;
        transition: width 0.5s ease;
        width: 0;
    }

    .step-icon {
        font-size: 24px; /* Giảm kích thước icon một chút */
    }
</style>

<div class="order-status">
    <div class="progress-container">
    <div class="progress-bar">
        <div class="progress-line"></div>
        <div class="progress-line-active" id="progress-line-active"></div>

        <div class="progress-step">
            <div class="step-circle completed">
                <i class="fas fa-folder step-icon"></i>
            </div>
            <div class="step-label">Đơn hàng đã đặt</div>
            <div class="step-time">21:19 24/06/2025</div>
        </div>

        <div class="progress-step">
            <div class="step-circle completed">
                <i class="fas fa-money-bill-wave step-icon"></i>
            </div>
            <div class="step-label">Đã thanh toán</div>
            <div class="step-time">21:20 24/06/2025</div>
        </div>

        <div class="progress-step">
            <div class="step-circle completed">
                <i class="fas fa-truck step-icon"></i>
            </div>
            <div class="step-label">Đã giao cho ĐVVC</div>
            <div class="step-time">17:49 25/06/2025</div>
        </div>

        <div class="progress-step">
            <div class="step-circle active">
                <i class="fas fa-box-open step-icon"></i>
            </div>
            <div class="step-label">Chờ giao hàng</div>
            <div class="step-time"></div>
        </div>

        <div class="progress-step">
            <div class="step-circle pending">
                <i class="fas fa-star step-icon"></i>
            </div>
            <div class="step-label">Đã hoàn thành</div>
            <div class="step-time"></div>
        </div>
    </div>
</div>
</div>
<script>
    // Tính toán và cập nhật thanh tiến trình
    function updateProgressBar() {
        const activeSteps = document.querySelectorAll('.step-circle.completed').length;
        const totalSteps = document.querySelectorAll('.progress-step').length;
        const progressPercentage = (activeSteps / (totalSteps - 1)) * 100;

        document.getElementById('progress-line-active').style.width = `${progressPercentage-3}%`;
    }

    // Thêm hiệu ứng khi trang được tải
    document.addEventListener('DOMContentLoaded', function() {
        updateProgressBar();

        // Hiệu ứng cho các bước đã hoàn thành
        const completedSteps = document.querySelectorAll('.step-circle.completed');
        completedSteps.forEach((step, index) => {
            setTimeout(() => {
                step.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    step.style.transform = 'scale(1)';
                }, 300);
            }, index * 300);
        });

        // Hiệu ứng cho bước hiện tại
        const activeStep = document.querySelector('.step-circle.active');
        setTimeout(() => {
            activeStep.style.transform = 'scale(1.2)';
            setTimeout(() => {
                activeStep.style.transform = 'scale(1)';
            }, 300);
        }, completedSteps.length * 300);
    });
</script>


<style>
    .status-detail{
        margin: 0 100px;
        display: flex;
    }

    .order-table {
        color: black;
        border-collapse: collapse;
        border: 1px solid #ccc;
        font-family: Arial, sans-serif;
        margin-left: auto;
        width: 50%;
    }
    .order-table td {
        padding: 8px;
        border-bottom: 1px solid #eee;
    }

    .order-table .last-row{
        text-align: right;
    }

    .toggle-btn {
        background: none;
        border: none;
        color: #0066cc;
        cursor: pointer;
        text-decoration: underline;
        padding: 0;

    }
    .hidden-row {
        display: none;
    }
</style>
<div class="status-detail">
    <table class="order-table">
    <tr>
        <td>10:30 25/06/2024</td>
        <td><b>Đang vận chuyển</b></td>
    </tr>
    <tr class="hidden-row">
        <td>09:15 24/06/2024</td>
        <td>Đã nhập kho</td>
    </tr>
    <tr class="hidden-row">
        <td>14:20 23/06/2024</td>
        <td>Đơn vị vận chuyển lấy hàng thành công</td>
    </tr>
    <tr class="hidden-row">
        <td>11:05 23/06/2024</td>
        <td>Đặt hàng thành công</td>
    </tr>
    <tr>
        <td colspan="2" class="last-row">
            <button class="toggle-btn">Xem chi tiết</button>
        </td>
    </tr>
</table>
</div>
<script>
    document.querySelector('.toggle-btn').addEventListener('click', function() {
        const hiddenRows = document.querySelectorAll('.hidden-row');
        const btn = this;

        hiddenRows.forEach(row => {
            if (row.style.display === 'none' || row.style.display === '') {
                row.style.display = 'table-row';
                btn.textContent = 'Ẩn chi tiết';
            } else {
                row.style.display = 'none';
                btn.textContent = 'Xem chi tiết';
            }
        });
    });
</script>

<div class="od-container">
    <div class="od-title-wrapper">
        <button class="back-button" title="Quay lại">
            <i class="fa-solid fa-share"></i>
        </button>
        <h1 class="od-title">Thông tin đơn hàng</h1>
    </div>
    <div class="od-header">

        <!-- Ngày giao hàng dự kiến 27/06/2025 -->
        <div class="od-delivery-date">Ngày nhận hàng dự kiến 30/06/2025</div>
        <span class="od-status">Đang chờ giao hàng</span>
    </div>

    <div class="od-row">
        <div class="od-col">
            <div class="od-section">
                <h2 class="od-section-title">Địa chỉ nhận hàng</h2>
                <div class="od-address">
                    <div class="od-recipient">Phạm Chí Tâm</div>
                    <div class="od-phone">052 2138 980</div>
                    <div>
                        Số 107 Khuông Việt, Phường Phú Trung, Quận Tân Phú, TP.Hồ Chí Minh
                    </div>
                </div>
            </div>

            <div class="od-section">
                <h2 class="od-section-title">Thông tin thanh toán</h2>
                <div class="od-detail">
                    <div class="od-detail-label">Phương thức thanh toán</div>
                    <div class="od-detail-value">SePay</div>
                </div>
                <div class="od-detail">
                    <div class="od-detail-label">Thời gian đặt hàng</div>
                    <div class="od-detail-value">26/06/2025 14:30</div>
                </div>
                <div class="od-detail">
                    <div class="od-detail-label">Thời gian thanh toán</div>
                    <div class="od-detail-value">26/06/2025 14:31</div>
                </div>
            </div>

            <div class="od-section">
                <!--                <h2 class="od-section-title">Thông tin đơn hàng</h2>-->
                <div class="od-detail">
                    <div class="od-detail-label">Mã đơn hàng</div>
                    <div class="od-detail-value">
                        #DH20250626123
                        <button class="od-copy-btn">Sao chép</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="od-col">
            <div class="od-section">
                <h2 class="od-section-title">Sản phẩm đã đặt</h2>
                <table class="od-products">
                    <thead>
                    <tr>
                        <th>Sản phẩm</th>
                        <th>Giá</th>
                        <th>Số lượng</th>
                        <th>Thành tiền</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>
                            <div style="display: flex; gap: 15px;">
                                <img src="https://image.hm.com/assets/hm/51/ba/51ba40d8f0d80713246fad69ab3b99732af9bf36.jpg" alt="Product" class="od-product-img">
                                <div>
                                    <div class="od-product-name">Áo thun nam cổ tròn</div>
                                    <div class="od-product-attr">Màu: Đen | Size: L</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="od-original-price">350,000đ</div>
                            <div class="od-discounted-price">280,000đ</div>
                        </td>
                        <td>2</td>
                        <td class="od-discounted-price">560,000đ</td>
                    </tr>
                    <tr>
                        <td>
                            <div style="display: flex; gap: 15px;">
                                <img src="https://image.hm.com/assets/hm/49/d5/49d532391fbb7ce88640c726644cc24b552aab27.jpg" alt="Product" class="od-product-img">
                                <div>
                                    <div class="od-product-name">Quần jeans nam</div>
                                    <div class="od-product-attr">Màu: Xanh | Size: 32</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="od-original-price">500,000đ</div>
                            <div class="od-discounted-price">400,000đ</div>
                        </td>
                        <td>1</td>
                        <td class="od-discounted-price">400,000đ</td>
                    </tr>
                    </tbody>
                </table>

                <div class="od-total">
                    <button id="od-expand-btn" class="od-expand-btn">Xem chi tiết</button>
                    <div id="od-details-expanded" class="od-details-expanded">
                        <div class="od-summary-item">
                            <span>Tổng tiền hàng:</span>
                            <span>960,000đ</span>
                        </div>
                        <div class="od-summary-item">
                            <span>Phí vận chuyển:</span>
                            <span>20,000đ</span>
                        </div>
                        <div class="od-summary-item">
                            <span>Giảm giá:</span>
                            <span>-130,000đ</span>
                        </div>
                    </div>
                    <div class="od-summary-item od-summary-total">
                        <span>Tổng cộng:</span>
                        <span>850,000đ</span>
                    </div>
                </div>
            </div>


        </div>
    </div>

    <div class="od-actions">
        <button class="od-btn od-btn-cancel">Hủy đơn hàng</button>
<!--        <button class="od-btn od-btn-track">Theo dõi đơn hàng</button>-->
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const expandBtn = document.getElementById('od-expand-btn');
        const detailsSection = document.getElementById('od-details-expanded');

        expandBtn.addEventListener('click', function() {
            if (detailsSection.style.display === 'block') {
                detailsSection.style.display = 'none';
                expandBtn.textContent = 'Xem chi tiết';
            } else {
                detailsSection.style.display = 'block';
                expandBtn.textContent = 'Ẩn chi tiết';
            }
        });

        // Copy mã đơn hàng
        const copyButtons = document.querySelectorAll('.od-copy-btn');
        copyButtons.forEach(button => {
            button.addEventListener('click', function() {
                const orderNumber = this.parentNode.textContent.trim().split(' ')[0];
                navigator.clipboard.writeText(orderNumber).then(() => {
                    const originalText = this.textContent;
                    this.textContent = 'Đã sao chép!';
                    setTimeout(() => {
                        this.textContent = originalText;
                    }, 2000);
                });
            });
        });
    });
</script>
</body>
</html>